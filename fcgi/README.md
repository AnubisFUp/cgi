 Обзор и руководство по настройке FCGI

# Введение

 FastCGI (FCGI) — это протокол, предназначенный для взаимодействия интерактивных программ с веб-сервером. В отличие от CGI, который создает новый процесс для каждого запроса, FastCGI поддерживает постоянные процессы для обработки нескольких запросов, что значительно улучшает производительность. В этой конфигурации скрипты просто ожидают входящих запросов, и система решает, какой процесс будет обрабатывать каждый запрос.

# Основные концепции

 - **Протокол FastCGI**: Протокол связи для взаимодействия веб-серверов с внешними приложениями. Он позволяет приложениям оставаться в памяти и быть готовыми к обработке нескольких запросов.
 - **Управление процессами**: Процессы FastCGI могут быть порождены и слушать один и тот же сокет благодаря копированию дескрипторов файлов при форке. Это позволяет эффективно обрабатывать параллельные запросы.

# Настройка и запуск FastCGI

## Запуск приложения

 Для запуска FastCGI приложения используйте команду `spawn-fcgi`. Вот два примера:

 1. **Запуск с использованием Nginx Script**:
   ```bash
   spawn-fcgi -p 5000 nginx.script -F 10
   ```
   Эта команда запускает 10 рабочих процессов, каждый из которых выполняет `nginx.script` на порту 5000.

 2. **Запуск с использованием Async Script**:
   ```bash
   spawn-fcgi -p 5000 async.script -F 1
   ```
   Эта команда запускает 1 рабочий процесс, выполняющий `async.script` на порту 5000.

## Минимальная конфигурация Nginx для FastCGI

 Для настройки Nginx на работу с FastCGI, добавьте следующий блок конфигурации в файл конфигурации Nginx:
 ```nginx
 location /cgi {
     include         fastcgi.conf;
     fastcgi_pass    127.0.0.1:5000;
 }
 ```

# Тестирование

 Для тестирования асинхронного бинарника можно использовать следующую команду:
 ```bash
 ./http_load -parallel 20 -fetches 20 fcgi
 ```
 Эта команда запускает 20 параллельных запросов и завершает выполнение после получения 20 запросов.

# Заключение

fsci - формат передачи запроса, то как выглядит сам запрос. Сам протокол описан в спецификации. Немного сложнее чем scgi

